# baby\_neural\_network
最近也在折腾TensorFlow，考虑到并没有看到其他CTF出过，于是就出来玩玩：）

## 基本介绍
tf的所有运算是基于Graph的，根据导入或直接绘制的GraphDef进行相应的分发和计算，最后返回Tensor。因此这个设计对符号执行有很好的抵抗能力。

## 预期解法
- 选手拿到题目，可以看到几十M的binary。使用IDA加载后可以看到程序的符号被完全保留。于是可以可以直接找到main。
- 照着Main开始进行分析，可以清晰看到MatMul、Add、Sigmoid等操作。
- 数据流分析后可知
	1. 输入被按字节每个取倒数得到 **a**
	2. **a** 经过右乘weights矩阵，再加上bias得到 **b**
	3. **b** 经过sigmoid函数得到 **a'**
	4. **a'** 重复2、3步操作4次得到 **o**
	5. **o**与内置的结果比对，输出结果
- 可以看出是很典型的5层感知机(Perceptron)
- 而整个算法是可逆的
	* 所有的weights矩阵都是方阵，并且均为满秩，故每个weights方阵都存在对应的逆
	* Sigmoid函数在定义域内连续且严格单调递增，故其反函数存在
- 我们只需要一层一层的回推即可成功反推得到flag

## 考察要点
- 数据处理：这道题精度要求很高，需要至少精确到double的最高有效位+2，推荐直接使用 struct.unpack 或者 指针 来进行读取
- 心态平和：由于大量C++特性的使用使得程序执行流晦涩难懂、模版代码、垃圾代码充斥。
- 紧跟潮流：熟悉tf的执行流程、内部机理
